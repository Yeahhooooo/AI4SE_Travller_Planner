# AI 旅行规划助手 - 项目开发路线图

本文档定义了从零开始构建整个 AI 旅行规划助手项目的分阶段开发计划。每个阶段都包含明确的目标和关键任务。

---

### 阶段一：项目奠基与用户认证 (已完成)

**目标**: 搭建前后端分离的基础架构，并实现核心的用户注册和登录功能。

**关键任务**:
1.  **✅ 项目脚手架**: 创建 `frontend` (Vue) 和 `backend` (Express) 两个独立的项目目录。
2.  **✅ 环境与依赖**: 为前后端项目初始化 `npm`，并安装 Express, Vue, Supabase-client, Vue-router 等核心依赖。
3.  **✅ UI 框架集成**: 集成 Element Plus 组件库，并配置按需自动导入，提升开发效率和界面美观度。
4.  **✅ 数据库设计**: 编写 `schema.sql` 文件，定义 `profiles`, `trips`, `trip_events`, `expenses` 等核心数据表，并根据功能迭代进行优化（例如，将费用与事件关联）。
5.  **✅ 后端认证接口**: 在 Express 中创建 `/api/auth/register` 和 `/api/auth/login` 接口，通过调用 Supabase SDK 完成用户认证逻辑。
6.  **✅ 前端认证页面**: 使用 Vue 和 Element Plus 创建美观、体验良好的登录 (`Login.vue`) 和注册 (`Register.vue`) 页面。
7.  **✅ 前端路由**: 配置 `vue-router`，建立公共路由（登录/注册）和受保护的仪表板路由 (`/dashboard`)。
8.  **✅ 认证流程打通**: 实现完整的前后端认证流程，包括用户输入、后端认证、前端路由守卫等。
9.  **✅ 仪表板入口**: 创建一个登录后的主页面 (`Dashboard.vue`)，作为核心功能的统一入口。
10. **✅ 文档与规范**: 创建 `PRD.md`, `.gitignore` 等初始项目文档，并持续维护。

---

### 阶段二：核心功能 - 智能行程规划与管理

**目标**: 实现产品的核心价值，让用户能够通过输入需求，由 AI 生成一份包含预算的完整旅行计划，并能对计划进行查看和管理。

**关键任务**:
1.  **后端规划接口**:
    *   创建 `POST /api/trips/generate` 接口，接收用户输入（目的地、天数、预算、偏好等）。
    *   在该接口内部，调用大语言模型 (LLM) API，将用户需求传递给 AI，并要求其返回结构化的行程数据和预算建议。
    *   解析 LLM 返回的数据，将其存入数据库的 `trips` 和 `trip_events` 表中。
2.  **后端查询接口**:
    *   创建 `GET /api/trips` 接口，用于获取当前用户的所有行程列表。
    *   创建 `GET /api/trips/{id}` 接口，用于获取单个行程的详细信息，包括所有事件 (events) 及每个事件关联的费用 (expenses)。
    *   创建 `POST /api/events/{eventId}/expenses` 接口，用于在具体事件下记录新的开销。
3.  **前端规划流程**:
    *   在仪表板上，为“开始规划”按钮链接到一个新的规划页面。
    *   设计一个表单，让用户可以输入旅行需求（初期为文本输入，包含预算）。
    *   调用后端接口生成行程，并用加载动画优化等待体验。
4.  **前端计划展示与管理**:
    *   创建一个“我的旅行计划”页面，以列表形式展示所有已创建的行程。
    *   创建一个行程详情页，以时间线 (Timeline) 的形式清晰地展示每日行程。
    *   在时间线上，每个事件旁边都应有记录/查看费用的入口。
    *   页面顶部或侧边栏显示该行程的“总预算”、“已花费”和“剩余预算”概览。
5.  **地图可视化**:
    *   集成百度地图 API。
    *   在行程详情页，将每日的景点、餐厅等位置在地图上进行标注。
    *   实现地图与时间线的交互（例如，点击时间线上的某个活动，地图上对应标注高亮）。
6.  **语音输入 (原型)**:
    *   集成科大讯飞等语音识别 API。
    *   在前端规划页面添加一个麦克风按钮，实现将用户语音输入转换为文本，并自动填充到表单中。

---

### 阶段三：功能优化与体验提升

**目标**: 对核心功能进行打磨，增加计划的灵活性和实用性，提升用户体验。

**关键任务**:
1.  **行程编辑与修改**:
    *   允许用户对 AI 生成的行程进行手动调整，例如拖拽调整事件顺序、替换景点、修改活动时间。
    *   提供添加/删除行程事件的功能。
    *   所有修改需要实时更新数据库和预算概览。
2.  **实时旅行辅助**:
    *   在地图上显示用户当前位置。
    *   提供一键导航到下一个活动地点的功能（调用外部地图 App）。
3.  **UI/UX 打磨**:
    *   优化界面设计，增加必要的过渡动画。
    *   确保应用在不同尺寸屏幕（桌面、平板、手机）上都有良好的响应式表现。
4.  **完善语音交互**:
    *   扩展语音指令，例如支持“语音记账”（“打车花了30块”），并能通过语义分析自动关联到当前或最近的事件。

---

### 阶段四：测试、部署与发布

**目标**: 确保产品质量，并将其部署到线上，让真实用户可以访问。

**关键任务**:
1.  **全面测试**: 进行单元测试、接口测试和端到端的功能测试，修复发现的 Bug。
2.  **性能优化**: 检查并优化前后端性能，特别是地图和大量数据展示时的性能。
3.  **生产环境部署**:
    *   将前端 Vue 应用构建为静态文件。
    *   选择一个合适的平台（如 Vercel, Netlify, 或自己的服务器）部署前端应用。
    *   选择一个云平台（如 Railway, Heroku, 或云服务器）部署后端 Express 应用。
4.  **最终验证**: 在生产环境中进行最后的功能验证，确保一切正常。
