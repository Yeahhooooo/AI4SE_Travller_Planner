# AI 旅行规划助手 - 项目开发路线图

本文档定义了从零开始构建整个 AI 旅行规划助手项目的分阶段开发计划。每个阶段都包含明确的目标和关键任务。

---

### 阶段一：项目奠基与用户认证 (已完成)

**目标**: 搭建前后端分离的基础架构，并实现核心的用户注册和登录功能。

**关键任务**:
1.  **✅ 项目脚手架**: 创建 `frontend` (Vue) 和 `backend` (Express) 两个独立的项目目录。
2.  **✅ 环境与依赖**: 为前后端项目初始化 `npm`，并安装 Express, Vue, Supabase-client, Vue-router, TailwindCSS 等核心依赖。
3.  **✅ 数据库设计**: 编写 `schema.sql` 文件，定义 `profiles`, `trips`, `trip_events`, `expenses` 等核心数据表，并在 Supabase 上完成初始化。
4.  **✅ 后端认证接口**: 在 Express 中创建 `/api/auth/register` 和 `/api/auth/login` 接口，通过调用 Supabase SDK 完成用户认证逻辑。
5.  **✅ 前端认证页面**: 使用 Vue 和 TailwindCSS 创建美观的登录 (`Login.vue`) 和注册 (`Register.vue`) 页面组件。
6.  **✅ 前端路由**: 配置 `vue-router`，建立公共路由（登录/注册）和受保护的仪表板路由 (`/dashboard`)。
7.  **✅ 认证流程打通**: 实现完整的前后端认证流程，包括：
    *   用户在前端页面输入信息。
    *   调用后端接口完成 Supabase 认证。
    *   通过路由守卫实现页面访问控制。
8.  **✅ 仪表板入口**: 创建一个登录后的主页面 (`Dashboard.vue`)，作为后续核心功能的入口。
9.  **✅ 文档与规范**: 创建 `PRD.md`, `.gitignore` 等初始项目文档。

---

### 阶段二：核心功能 - 智能行程规划

**目标**: 实现产品的核心价值，让用户能够通过输入需求，由 AI 生成一份完整的旅行计划。

**关键任务**:
1.  **后端规划接口**:
    *   创建 `POST /api/trips/generate` 接口，接收用户输入（目的地、天数、偏好等）。
    *   在该接口内部，调用大语言模型 (LLM) API，将用户需求传递给 AI。
    *   解析 LLM 返回的行程数据，将其结构化并存入数据库的 `trips` 和 `trip_events` 表中。
    *   创建 `GET /api/trips` 和 `GET /api/trips/{id}` 接口，用于获取用户的行程列表和单个行程详情。
2.  **前端规划页面**:
    *   在仪表板上，为“开始规划”按钮链接到一个新的规划页面。
    *   设计一个表单，让用户可以输入旅行需求（初期为文本输入）。
    *   调用后端接口生成行程，并用加载动画优化等待体验。
    *   以时间线 (Timeline) 的形式清晰地展示 AI 生成的每日行程。
3.  **地图可视化**:
    *   集成百度地图 API。
    *   在行程展示页面，将每日的景点、餐厅等位置在地图上进行标注。
    *   实现地图与时间线的交互（例如，点击时间线上的某个活动，地图上对应标注高亮）。
4.  **语音输入 (原型)**:
    *   集成科大讯飞等语音识别 API。
    *   在前端规划页面添加一个麦克风按钮，实现将用户语音输入转换为文本，并自动填充到表单中。

---

### 阶段三：核心功能 - 费用预算与管理

**目标**: 为用户提供预算分析和开销记录功能，完善旅行闭环。

**关键任务**:
1.  **后端费用接口**:
    *   创建 `POST /api/trips/{tripId}/expenses` 接口，用于记录新的开销。
    *   创建 `GET /api/trips/{tripId}/expenses` 接口，获取指定行程的所有开销记录。
    *   创建 `GET /api/trips/{tripId}/budget` 接口，用于获取 AI 预算分析和当前支出概览。
2.  **前端费用页面**:
    *   在仪表板上，为“管理费用”按钮链接到一个新的费用管理页面。
    *   以图表（如饼图）形式展示 AI 生成的预算分布。
    *   用醒目的卡片展示“总预算”、“已花费”和“剩余预算”。
    *   提供一个表单或弹窗，让用户可以方便地记录每一笔开销。
    *   以列表形式展示所有已记录的开销。

---

### 阶段四：功能优化与体验提升

**目标**: 对核心功能进行打磨，提升产品的实用性和用户体验。

**关键任务**:
1.  **行程编辑**: 允许用户对 AI 生成的行程进行微调，例如替换景点、修改活动时间、添加备注等。
2.  **实时旅行辅助**: 在地图上显示用户当前位置，并提供一键导航到下一个活动地点的功能（调用外部地图 App）。
3.  **UI/UX 打磨**: 优化界面设计，增加过渡动画，确保在不同尺寸屏幕上的响应式表现。
4.  **完善语音交互**: 扩展语音指令，例如支持“语音记账”（“打车花了30块”）。

---

### 阶段五：测试、部署与发布

**目标**: 确保产品质量，并将其部署到线上，让真实用户可以访问。

**关键任务**:
1.  **全面测试**: 进行单元测试、接口测试和端到端的功能测试，修复发现的 Bug。
2.  **性能优化**: 检查并优化前后端性能，确保快速响应。
3.  **生产环境部署**:
    *   将前端 Vue 应用构建为静态文件。
    *   选择一个合适的平台（如 Vercel, Netlify, 或自己的服务器）部署前端应用。
    *   选择一个云平台（如 Railway, Heroku, 或云服务器）部署后端 Express 应用。
4.  **最终验证**: 在生产环境中进行最后的功能验证，确保一切正常。
