# AI 旅行规划助手产品需求文档 (PRD)

## 1. 引言

### 1.1 项目背景
随着生活水平的提高，旅行已成为人们放松身心、体验不同文化的重要方式。然而，传统的旅行规划过程繁琐、耗时，涉及信息搜集、路线规划、预算制定等多个环节，给用户带来不小的负担。本项目旨在开发一款 AI 旅行规划助手，通过人工智能技术简化旅行规划流程，为用户提供个性化、智能化的旅行服务。

### 1.2 产品目标
- **核心目标**: 打造一款领先的 AI 旅行规划工具，让用户通过简单的语音或文字输入，即可获得完整、个性化的旅行计划。
- **短期目标**: 实现核心功能（智能行程规划、费用管理、用户系统），完成 Web 版本开发，并获取首批种子用户。
- **长期目标**: 扩展平台（如移动端 App），增加社交分享、实时旅行辅助等功能，构建活跃的旅行社区，成为用户首选的智能旅行平台。

### 1.3 目标用户
- **主要用户**: 追求高效、个性化旅行体验的年轻用户、家庭出游的组织者、缺乏旅行规划经验的新手。
- **次要用户**: 商务旅行者、希望记录和分享旅行经验的资深旅行爱好者。

---

## 2. 产品概述

### 2.1 产品简介
AI 旅行规划助手是一款基于大语言模型和语音识别技术的智能 Web 应用。它能够理解用户的自然语言需求，自动生成包含交通、住宿、景点、餐饮在内的详细旅行路线，并提供费用预算和开销管理功能。用户的所有数据都将通过云端同步，方便在多设备上随时访问和修改。

### 2.2 核心功能列表
- **智能行程规划**:
  - 支持语音和文字输入需求。
  - AI 自动生成个性化旅行计划。
  - 地图化展示行程路线。
- **费用预算与管理**:
  - AI 辅助生成旅行总预算。
  - 支持语音和手动记录开销。
  - 实时跟踪费用使用情况。
- **用户管理与数据存储**:
  - 用户注册与登录系统。
  - 云端保存和同步旅行计划、用户偏好及费用记录。

---

## 3. 功能规格

### 3.1 智能行程规划
- **3.1.1 需求输入**
  - **描述**: 用户可以通过语音或文本输入旅行需求。语音输入是核心交互方式，需保证高识别率和自然语言理解能力。
  - **输入形式**:
    - **语音输入**: 用户点击麦克风按钮，通过自然语言描述需求，例如：“下个月带我爸妈去云南玩一周，预算八千块，他们喜欢自然风光，行程安排轻松一点。”
    - **文字输入**: 提供文本框，用户可以手动输入详细需求。
  - **需求要素**: 目的地、时间、预算、人数、偏好（如美食、购物、亲子、慢节奏等）。
- **3.1.2 AI 行程生成**
  - **描述**: 系统将用户输入的需求发送至大语言模型，生成一份包含每日活动的详细行程。
  - **输出内容**:
    - **每日概览**: 每天的核心主题和路线概览。
    - **交通建议**: 城市间（飞机、火车）和市内（地铁、公交、打车）的交通方式。
    - **住宿推荐**: 根据预算和偏好推荐酒店、民宿等。
    - **景点安排**: 每日参观的景点，附带简介和建议游玩时间。
    - **餐饮推荐**: 推荐当地特色餐厅。
  - **交互**: 生成的行程应清晰地展示在地图和时间线上，用户可以对单个项目进行微调（如替换景点、修改时间）。
- **3.1.3 地图交互**
  - **描述**: 行程路线将在地图上进行可视化展示，方便用户直观了解地理位置和距离。
  - **功能**:
    - 在地图上标注所有行程点（住宿、景点、餐厅）。
    - 点击地图上的点，可以查看详细信息。
    - 提供从当前位置到下一个目的地的导航功能（调用第三方地图 API）。

### 3.2 费用预算与管理
- **3.2.1 AI 预算分析**
  - **描述**: AI 根据生成的行程，结合目的地消费水平，自动估算交通、住宿、餐饮、门票等各项费用，形成总预算。
  - **功能**:
    - 提供预算构成饼图或列表，让用户清晰了解费用分布。
    - 用户可以根据自身情况调整预算。
- **3.2.2 开销记录**
  - **描述**: 用户在旅行过程中可以方便地记录每一笔开销。
  - **功能**:
    - **语音记账**: 用户可以说：“打车花了 30 块”，系统自动识别并记录。
    - **手动记账**: 提供表单，用户可以手动输入金额、类别（交通、餐饮等）和备注。
- **3.2.3 费用跟踪**
  - **描述**: 系统实时汇总开销，并与预算进行对比。
  - **功能**:
    - 显示总预算、已花费金额和剩余金额。
    - 当支出接近或超过预算时，给予用户提醒。

### 3.3 用户管理与数据存储
- **3.3.1 注册与登录**
  - **描述**: 提供标准的注册和登录功能，用于身份认证和数据隔离。
  - **功能**:
    - 支持邮箱/手机号注册。
    - 提供忘记密码和重置密码功能。
    - （可选）支持第三方社交账号（如微信、GitHub）快速登录。
- **3.3.2 云端数据同步**
  - **描述**: 用户的旅行计划、偏好设置、费用记录等所有数据都将安全地存储在云端。
  - **功能**:
    - 用户登录后，数据自动从云端加载。
    - 用户在任何设备上所做的修改都会实时同步到云端。
    - 支持创建、保存和管理多份独立的旅行计划。

---

## 4. 技术规格

### 4.1 技术栈
- **前端**:
  - **框架**: React / Vue.js (待定)
  - **UI 库**: Ant Design / Tailwind CSS (待定)
  - **地图**: 百度地图 API
- **后端**:
  - **框架**: Node.js (Express / NestJS) / Python (FastAPI) (待定)
  - **数据库与认证**: Supabase
- **AI 服务**:
  - **语音识别**: 科大讯飞开放平台 API
  - **大语言模型**: OpenAI GPT-4 / 类似功能的国产大模型 API (待定)

### 4.2 系统架构
- **架构模式**: 采用前后端分离的微服务架构。
  - **前端应用**: 负责 UI 展示和用户交互。
  - **后端服务**:
    - **API 网关**: 统一处理请求，负责认证、路由。
    - **用户服务**: 管理用户注册、登录和个人资料。
    - **行程服务**: 负责行程的创建、查询、修改，并与大语言模型 API 交互。
    - **费用服务**: 管理预算和开销记录。
  - **第三方服务**: Supabase、地图 API、语音识别 API、LLM API。

### 4.3 API 设计 (初步)
- `POST /api/v1/auth/register` - 用户注册
- `POST /api/v1/auth/login` - 用户登录
- `POST /api/v1/trips` - 创建新的旅行计划
- `GET /api/v1/trips/{tripId}` - 获取旅行计划详情
- `PUT /api/v1/trips/{tripId}` - 修改旅行计划
- `POST /api/v1/trips/{tripId}/expenses` - 记录开销

### 4.4 数据库设计 (基于 Supabase)
- **`users` 表**: 存储用户信息 (id, email, created_at)。
- **`trips` 表**: 存储旅行计划 (id, user_id, name, start_date, end_date, budget)。
- **`trip_events` 表**: 存储行程中的具体事件 (id, trip_id, type, description, location, start_time, end_time)。
- **`expenses` 表**: 存储开销记录 (id, trip_id, amount, category, description, date)。

---

## 5. UI/UX 设计

### 5.1 设计原则
- **简洁直观**: 界面设计以地图为中心，行程信息清晰明了。
- **美观现代**: 使用高质量的图片和流畅的动效，提升用户体验。
- **交互友好**: 重点突出语音输入功能，简化操作流程。

### 5.2 核心界面草图
- **首页**: 包含一个醒目的输入框（支持语音和文字）和用户过往行程的列表。
- **行程规划页**:
  - 左侧为时间线，展示每日行程。
  - 右侧为地图，同步标注行程点。
  - 提供编辑和调整功能。
- **费用管理页**:
  - 顶部显示预算和支出概览。
  - 下方为开销记录列表和记账入口。

---

## 6. 开发计划

### 6.1 里程碑
- **M1: 技术验证与原型开发 (2 周)**
  - 完成核心技术（语音识别、LLM、地图）的 API 对接与测试。
  - 开发一个最小可行原型（MVP），实现一次完整的行程生成流程。
- **M2: 核心功能开发 (4 周)**
  - 完成用户注册登录系统。
  - 实现完整的智能行程规划和费用管理功能。
  - 完善前后端架构。
- **M3: 测试与优化 (2 周)**
  - 进行全面的功能测试和性能测试。
  - 根据测试反馈进行 bug 修复和体验优化。
- **M4: 上线与发布 (1 周)**
  - 部署应用，正式上线。
  - 准备产品宣传材料，开始用户推广。

### 6.2 时间线
- **第一周-第二周**: M1
- **第三周-第六周**: M2
- **第七周-第八周**: M3
- **第九周**: M4

---

## 7. 附录
- (此部分可用于补充术语解释、参考资料等)
